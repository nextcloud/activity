import{g as se}from"./_commonjsHelpers-Cqwegr3R.chunk.mjs";function pe(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ne={exports:{}},h=ne.exports={},L,d;function X(){throw new Error("setTimeout has not been defined")}function k(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?L=setTimeout:L=X}catch{L=X}try{typeof clearTimeout=="function"?d=clearTimeout:d=k}catch{d=k}})();function ie(r){if(L===setTimeout)return setTimeout(r,0);if((L===X||!L)&&setTimeout)return L=setTimeout,setTimeout(r,0);try{return L(r,0)}catch{try{return L.call(null,r,0)}catch{return L.call(this,r,0)}}}function Ie(r){if(d===clearTimeout)return clearTimeout(r);if((d===k||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(r);try{return d(r)}catch{try{return d.call(null,r)}catch{return d.call(this,r)}}}var O=[],T=!1,m,y=-1;function fe(){!T||!m||(T=!1,m.length?O=m.concat(O):y=-1,O.length&&oe())}function oe(){if(!T){var r=ie(fe);T=!0;for(var e=O.length;e;){for(m=O,O=[];++y<e;)m&&m[y].run();y=-1,e=O.length}m=null,T=!1,Ie(r)}}h.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)e[s-1]=arguments[s];O.push(new ae(r,e)),O.length===1&&!T&&ie(oe)};function ae(r,e){this.fun=r,this.array=e}ae.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={};function N(){}h.on=N,h.addListener=N,h.once=N,h.off=N,h.removeListener=N,h.removeAllListeners=N,h.emit=N,h.prependListener=N,h.prependOnceListener=N,h.listeners=function(r){return[]},h.binding=function(r){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(r){throw new Error("process.chdir is not supported")},h.umask=function(){return 0};var Le=ne.exports;const de=pe(Le);var D,H;function Ee(){if(H)return D;H=1;var r={};return D=typeof de=="object"&&r&&r.NODE_DEBUG&&/\bsemver\b/i.test(r.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},D}var C,W;function ce(){if(W)return C;W=1;const r="2.0.0",e=256,s=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,c=e-6;return C={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:o,MAX_SAFE_BUILD_LENGTH:c,MAX_SAFE_INTEGER:s,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:r,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},C}var _={exports:{}},z;function Re(){return z||(z=1,function(r,e){const{MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:o,MAX_LENGTH:c}=ce(),f=Ee();e=r.exports={};const g=e.re=[],I=e.safeRe=[],n=e.src=[],i=e.safeSrc=[],t=e.t={};let E=0;const u="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",c],[u,o]],le=v=>{for(const[R,b]of p)v=v.split(`${R}*`).join(`${R}{0,${b}}`).split(`${R}+`).join(`${R}{1,${b}}`);return v},a=(v,R,b)=>{const V=le(R),A=E++;f(v,A,R),t[v]=A,n[A]=R,i[A]=V,g[A]=new RegExp(R,b?"g":void 0),I[A]=new RegExp(V,b?"g":void 0)};a("NUMERICIDENTIFIER","0|[1-9]\\d*"),a("NUMERICIDENTIFIERLOOSE","\\d+"),a("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${u}*`),a("MAINVERSION",`(${n[t.NUMERICIDENTIFIER]})\\.(${n[t.NUMERICIDENTIFIER]})\\.(${n[t.NUMERICIDENTIFIER]})`),a("MAINVERSIONLOOSE",`(${n[t.NUMERICIDENTIFIERLOOSE]})\\.(${n[t.NUMERICIDENTIFIERLOOSE]})\\.(${n[t.NUMERICIDENTIFIERLOOSE]})`),a("PRERELEASEIDENTIFIER",`(?:${n[t.NONNUMERICIDENTIFIER]}|${n[t.NUMERICIDENTIFIER]})`),a("PRERELEASEIDENTIFIERLOOSE",`(?:${n[t.NONNUMERICIDENTIFIER]}|${n[t.NUMERICIDENTIFIERLOOSE]})`),a("PRERELEASE",`(?:-(${n[t.PRERELEASEIDENTIFIER]}(?:\\.${n[t.PRERELEASEIDENTIFIER]})*))`),a("PRERELEASELOOSE",`(?:-?(${n[t.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${n[t.PRERELEASEIDENTIFIERLOOSE]})*))`),a("BUILDIDENTIFIER",`${u}+`),a("BUILD",`(?:\\+(${n[t.BUILDIDENTIFIER]}(?:\\.${n[t.BUILDIDENTIFIER]})*))`),a("FULLPLAIN",`v?${n[t.MAINVERSION]}${n[t.PRERELEASE]}?${n[t.BUILD]}?`),a("FULL",`^${n[t.FULLPLAIN]}$`),a("LOOSEPLAIN",`[v=\\s]*${n[t.MAINVERSIONLOOSE]}${n[t.PRERELEASELOOSE]}?${n[t.BUILD]}?`),a("LOOSE",`^${n[t.LOOSEPLAIN]}$`),a("GTLT","((?:<|>)?=?)"),a("XRANGEIDENTIFIERLOOSE",`${n[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),a("XRANGEIDENTIFIER",`${n[t.NUMERICIDENTIFIER]}|x|X|\\*`),a("XRANGEPLAIN",`[v=\\s]*(${n[t.XRANGEIDENTIFIER]})(?:\\.(${n[t.XRANGEIDENTIFIER]})(?:\\.(${n[t.XRANGEIDENTIFIER]})(?:${n[t.PRERELEASE]})?${n[t.BUILD]}?)?)?`),a("XRANGEPLAINLOOSE",`[v=\\s]*(${n[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${n[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${n[t.XRANGEIDENTIFIERLOOSE]})(?:${n[t.PRERELEASELOOSE]})?${n[t.BUILD]}?)?)?`),a("XRANGE",`^${n[t.GTLT]}\\s*${n[t.XRANGEPLAIN]}$`),a("XRANGELOOSE",`^${n[t.GTLT]}\\s*${n[t.XRANGEPLAINLOOSE]}$`),a("COERCEPLAIN",`(^|[^\\d])(\\d{1,${s}})(?:\\.(\\d{1,${s}}))?(?:\\.(\\d{1,${s}}))?`),a("COERCE",`${n[t.COERCEPLAIN]}(?:$|[^\\d])`),a("COERCEFULL",n[t.COERCEPLAIN]+`(?:${n[t.PRERELEASE]})?(?:${n[t.BUILD]})?(?:$|[^\\d])`),a("COERCERTL",n[t.COERCE],!0),a("COERCERTLFULL",n[t.COERCEFULL],!0),a("LONETILDE","(?:~>?)"),a("TILDETRIM",`(\\s*)${n[t.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",a("TILDE",`^${n[t.LONETILDE]}${n[t.XRANGEPLAIN]}$`),a("TILDELOOSE",`^${n[t.LONETILDE]}${n[t.XRANGEPLAINLOOSE]}$`),a("LONECARET","(?:\\^)"),a("CARETTRIM",`(\\s*)${n[t.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",a("CARET",`^${n[t.LONECARET]}${n[t.XRANGEPLAIN]}$`),a("CARETLOOSE",`^${n[t.LONECARET]}${n[t.XRANGEPLAINLOOSE]}$`),a("COMPARATORLOOSE",`^${n[t.GTLT]}\\s*(${n[t.LOOSEPLAIN]})$|^$`),a("COMPARATOR",`^${n[t.GTLT]}\\s*(${n[t.FULLPLAIN]})$|^$`),a("COMPARATORTRIM",`(\\s*)${n[t.GTLT]}\\s*(${n[t.LOOSEPLAIN]}|${n[t.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",a("HYPHENRANGE",`^\\s*(${n[t.XRANGEPLAIN]})\\s+-\\s+(${n[t.XRANGEPLAIN]})\\s*$`),a("HYPHENRANGELOOSE",`^\\s*(${n[t.XRANGEPLAINLOOSE]})\\s+-\\s+(${n[t.XRANGEPLAINLOOSE]})\\s*$`),a("STAR","(<|>)?=?\\s*\\*"),a("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),a("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(_,_.exports)),_.exports}var F,K;function Ne(){if(K)return F;K=1;const r=Object.freeze({loose:!0}),e=Object.freeze({});return F=s=>s?typeof s!="object"?r:s:e,F}var G,Y;function Oe(){if(Y)return G;Y=1;const r=/^[0-9]+$/,e=(s,o)=>{if(typeof s=="number"&&typeof o=="number")return s===o?0:s<o?-1:1;const c=r.test(s),f=r.test(o);return c&&f&&(s=+s,o=+o),s===o?0:c&&!f?-1:f&&!c?1:s<o?-1:1};return G={compareIdentifiers:e,rcompareIdentifiers:(s,o)=>e(o,s)},G}var M,q;function ue(){if(q)return M;q=1;const r=Ee(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:s}=ce(),{safeRe:o,t:c}=Re(),f=Ne(),{compareIdentifiers:g}=Oe();class I{constructor(i,t){if(t=f(t),i instanceof I){if(i.loose===!!t.loose&&i.includePrerelease===!!t.includePrerelease)return i;i=i.version}else if(typeof i!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof i}".`);if(i.length>e)throw new TypeError(`version is longer than ${e} characters`);r("SemVer",i,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const E=i.trim().match(t.loose?o[c.LOOSE]:o[c.FULL]);if(!E)throw new TypeError(`Invalid Version: ${i}`);if(this.raw=i,this.major=+E[1],this.minor=+E[2],this.patch=+E[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");E[4]?this.prerelease=E[4].split(".").map(u=>{if(/^[0-9]+$/.test(u)){const p=+u;if(p>=0&&p<s)return p}return u}):this.prerelease=[],this.build=E[5]?E[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(i){if(r("SemVer.compare",this.version,this.options,i),!(i instanceof I)){if(typeof i=="string"&&i===this.version)return 0;i=new I(i,this.options)}return i.version===this.version?0:this.compareMain(i)||this.comparePre(i)}compareMain(i){return i instanceof I||(i=new I(i,this.options)),this.major<i.major?-1:this.major>i.major?1:this.minor<i.minor?-1:this.minor>i.minor?1:this.patch<i.patch?-1:this.patch>i.patch?1:0}comparePre(i){if(i instanceof I||(i=new I(i,this.options)),this.prerelease.length&&!i.prerelease.length)return-1;if(!this.prerelease.length&&i.prerelease.length)return 1;if(!this.prerelease.length&&!i.prerelease.length)return 0;let t=0;do{const E=this.prerelease[t],u=i.prerelease[t];if(r("prerelease compare",t,E,u),E===void 0&&u===void 0)return 0;if(u===void 0)return 1;if(E===void 0)return-1;if(E!==u)return g(E,u)}while(++t)}compareBuild(i){i instanceof I||(i=new I(i,this.options));let t=0;do{const E=this.build[t],u=i.build[t];if(r("build compare",t,E,u),E===void 0&&u===void 0)return 0;if(u===void 0)return 1;if(E===void 0)return-1;if(E!==u)return g(E,u)}while(++t)}inc(i,t,E){if(i.startsWith("pre")){if(!t&&E===!1)throw new Error("invalid increment argument: identifier is empty");if(t){const u=`-${t}`.match(this.options.loose?o[c.PRERELEASELOOSE]:o[c.PRERELEASE]);if(!u||u[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(i){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,E),this.inc("pre",t,E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,E),this.inc("pre",t,E);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const u=Number(E)?1:0;if(this.prerelease.length===0)this.prerelease=[u];else{let p=this.prerelease.length;for(;--p>=0;)typeof this.prerelease[p]=="number"&&(this.prerelease[p]++,p=-2);if(p===-1){if(t===this.prerelease.join(".")&&E===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(u)}}if(t){let p=[t,u];E===!1&&(p=[t]),g(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=p):this.prerelease=p}break}default:throw new Error(`invalid increment argument: ${i}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return M=I,M}var U,Z;function me(){if(Z)return U;Z=1;const r=ue();return U=(e,s)=>new r(e,s).major,U}var ve=me();const J=se(ve);var x,Q;function Ae(){if(Q)return x;Q=1;const r=ue();return x=(e,s,o=!1)=>{if(e instanceof r)return e;try{return new r(e,s)}catch(c){if(!o)return null;throw c}},x}var j,ee;function $e(){if(ee)return j;ee=1;const r=Ae();return j=(e,s)=>{const o=r(e,s);return o?o.version:null},j}var Te=$e();const ge=se(Te);class be{bus;constructor(e){typeof e.getVersion!="function"||!ge(e.getVersion())?console.warn("Proxying an event bus with an unknown or invalid version"):J(e.getVersion())!==J(this.getVersion())&&console.warn("Proxying an event bus of version "+e.getVersion()+" with "+this.getVersion()),this.bus=e}getVersion(){return"3.3.3"}subscribe(e,s){this.bus.subscribe(e,s)}unsubscribe(e,s){this.bus.unsubscribe(e,s)}emit(e,...s){this.bus.emit(e,...s)}}class we{handlers=new Map;getVersion(){return"3.3.3"}subscribe(e,s){this.handlers.set(e,(this.handlers.get(e)||[]).concat(s))}unsubscribe(e,s){this.handlers.set(e,(this.handlers.get(e)||[]).filter(o=>o!==s))}emit(e,...s){(this.handlers.get(e)||[]).forEach(o=>{try{o(s[0])}catch(c){console.error("could not invoke event listener",c)}})}}let w=null;function B(){return w!==null?w:typeof window>"u"?new Proxy({},{get:()=>()=>console.error("Window not available, EventBus can not be established!")}):(window.OC?._eventBus&&typeof window._nc_event_bus>"u"&&(console.warn("found old event bus instance at OC._eventBus. Update your version!"),window._nc_event_bus=window.OC._eventBus),typeof window?._nc_event_bus<"u"?w=new be(window._nc_event_bus):w=window._nc_event_bus=new we,w)}function Se(r,e){B().subscribe(r,e)}function Be(r,e){B().unsubscribe(r,e)}function Ve(r,...e){B().emit(r,...e)}class P{static GLOBAL_SCOPE_VOLATILE="nextcloud_vol";static GLOBAL_SCOPE_PERSISTENT="nextcloud_per";scope;wrapped;constructor(e,s,o){this.scope=`${o?P.GLOBAL_SCOPE_PERSISTENT:P.GLOBAL_SCOPE_VOLATILE}_${btoa(e)}_`,this.wrapped=s}scopeKey(e){return`${this.scope}${e}`}setItem(e,s){this.wrapped.setItem(this.scopeKey(e),s)}getItem(e){return this.wrapped.getItem(this.scopeKey(e))}removeItem(e){this.wrapped.removeItem(this.scopeKey(e))}clear(){Object.keys(this.wrapped).filter(e=>e.startsWith(this.scope)).map(this.wrapped.removeItem.bind(this.wrapped))}}class ye{appId;persisted=!1;clearedOnLogout=!1;constructor(e){this.appId=e}persist(e=!0){return this.persisted=e,this}clearOnLogout(e=!0){return this.clearedOnLogout=e,this}build(){return new P(this.appId,this.persisted?window.localStorage:window.sessionStorage,!this.clearedOnLogout)}}function Pe(r){return new ye(r)}let S;const he=[];function He(){return S===void 0&&(S=document.head.dataset.requesttoken??null),S}function We(r){he.push(r)}Se("csrf-token-update",r=>{S=r.token,he.forEach(e=>{try{e(S)}catch(s){console.error("Error updating CSRF token observer",s)}})});Pe("public").persist().build();let $;function te(r,e){return r?r.getAttribute(e):null}function De(){if($!==void 0)return $;const r=document?.getElementsByTagName("head")[0];if(!r)return null;const e=te(r,"data-user");return e===null?($=null,$):($={uid:e,displayName:te(r,"data-user-displayname"),isAdmin:!!window._oc_isadmin},$)}var l=(r=>(r[r.Debug=0]="Debug",r[r.Info=1]="Info",r[r.Warn=2]="Warn",r[r.Error=3]="Error",r[r.Fatal=4]="Fatal",r))(l||{}),Ce=Object.defineProperty,_e=(r,e,s)=>e in r?Ce(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,Fe=(r,e,s)=>(_e(r,e+"",s),s);class Ge{constructor(e){Fe(this,"context"),this.context=e||{}}formatMessage(e,s,o){let c="["+l[s].toUpperCase()+"] ";return o&&o.app&&(c+=o.app+": "),typeof e=="string"?c+e:(c+="Unexpected ".concat(e.name),e.message&&(c+=' "'.concat(e.message,'"')),s===l.Debug&&e.stack&&(c+=`

Stack trace:
`.concat(e.stack)),c)}log(e,s,o){var c,f;if(!(typeof((c=this.context)==null?void 0:c.level)=="number"&&e<((f=this.context)==null?void 0:f.level)))switch(typeof s=="object"&&o?.error===void 0&&(o.error=s),e){case l.Debug:console.debug(this.formatMessage(s,l.Debug,o),o);break;case l.Info:console.info(this.formatMessage(s,l.Info,o),o);break;case l.Warn:console.warn(this.formatMessage(s,l.Warn,o),o);break;case l.Error:console.error(this.formatMessage(s,l.Error,o),o);break;case l.Fatal:default:console.error(this.formatMessage(s,l.Fatal,o),o);break}}debug(e,s){this.log(l.Debug,e,Object.assign({},this.context,s))}info(e,s){this.log(l.Info,e,Object.assign({},this.context,s))}warn(e,s){this.log(l.Warn,e,Object.assign({},this.context,s))}error(e,s){this.log(l.Error,e,Object.assign({},this.context,s))}fatal(e,s){this.log(l.Fatal,e,Object.assign({},this.context,s))}}function Me(r){return new Ge(r)}var Ue=Object.defineProperty,xe=(r,e,s)=>e in r?Ue(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,re=(r,e,s)=>(xe(r,typeof e!="symbol"?e+"":e,s),s);class je{constructor(e){re(this,"context"),re(this,"factory"),this.context={},this.factory=e}setApp(e){return this.context.app=e,this}setLogLevel(e){return this.context.level=e,this}setUid(e){return this.context.uid=e,this}detectUser(){const e=De();return e!==null&&(this.context.uid=e.uid),this}detectLogLevel(){const e=this,s=()=>{var o,c;document.readyState==="complete"||document.readyState==="interactive"?(e.context.level=(c=(o=window._oc_config)==null?void 0:o.loglevel)!=null?c:l.Warn,window._oc_debug&&(e.context.level=l.Debug),document.removeEventListener("readystatechange",s)):document.addEventListener("readystatechange",s)};return s(),this}build(){return this.context.level===void 0&&this.detectLogLevel(),this.factory(this.context)}}function Xe(){return new je(Me)}const ze=Xe().setApp("activity").detectUser().build();export{Xe as a,De as b,He as c,Ve as e,Pe as g,ze as l,We as o,de as p,Se as s,Be as u};
//# sourceMappingURL=logger-ajwQ1fDw.chunk.mjs.map
