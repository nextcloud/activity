import{g as ne}from"./_commonjsHelpers-Cqwegr3R.chunk.mjs";function pe(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var se={exports:{}},l=se.exports={},L,d;function j(){throw new Error("setTimeout has not been defined")}function k(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?L=setTimeout:L=j}catch{L=j}try{typeof clearTimeout=="function"?d=clearTimeout:d=k}catch{d=k}})();function ie(r){if(L===setTimeout)return setTimeout(r,0);if((L===j||!L)&&setTimeout)return L=setTimeout,setTimeout(r,0);try{return L(r,0)}catch{try{return L.call(null,r,0)}catch{return L.call(this,r,0)}}}function Ie(r){if(d===clearTimeout)return clearTimeout(r);if((d===k||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(r);try{return d(r)}catch{try{return d.call(null,r)}catch{return d.call(this,r)}}}var O=[],g=!1,v,P=-1;function fe(){!g||!v||(g=!1,v.length?O=v.concat(O):P=-1,O.length&&oe())}function oe(){if(!g){var r=ie(fe);g=!0;for(var e=O.length;e;){for(v=O,O=[];++P<e;)v&&v[P].run();P=-1,e=O.length}v=null,g=!1,Ie(r)}}l.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];O.push(new ae(r,e)),O.length===1&&!g&&ie(oe)};function ae(r,e){this.fun=r,this.array=e}ae.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function N(){}l.on=N,l.addListener=N,l.once=N,l.off=N,l.removeListener=N,l.removeAllListeners=N,l.emit=N,l.prependListener=N,l.prependOnceListener=N,l.listeners=function(r){return[]},l.binding=function(r){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(r){throw new Error("process.chdir is not supported")},l.umask=function(){return 0};var Le=se.exports;const de=pe(Le);var D,H;function Ee(){if(H)return D;H=1;var r={};return D=typeof de=="object"&&r&&r.NODE_DEBUG&&/\bsemver\b/i.test(r.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},D}var C,W;function ce(){if(W)return C;W=1;const r="2.0.0",e=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,c=e-6;return C={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:o,MAX_SAFE_BUILD_LENGTH:c,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:r,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},C}var _={exports:{}},z;function Re(){return z||(z=1,function(r,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:o,MAX_LENGTH:c}=ce(),f=Ee();e=r.exports={};const m=e.re=[],I=e.safeRe=[],s=e.src=[],i=e.safeSrc=[],t=e.t={};let E=0;const u="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",c],[u,o]],he=A=>{for(const[R,b]of p)A=A.split(`${R}*`).join(`${R}{0,${b}}`).split(`${R}+`).join(`${R}{1,${b}}`);return A},a=(A,R,b)=>{const V=he(R),$=E++;f(A,$,R),t[A]=$,s[$]=R,i[$]=V,m[$]=new RegExp(R,b?"g":void 0),I[$]=new RegExp(V,b?"g":void 0)};a("NUMERICIDENTIFIER","0|[1-9]\\d*"),a("NUMERICIDENTIFIERLOOSE","\\d+"),a("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${u}*`),a("MAINVERSION",`(${s[t.NUMERICIDENTIFIER]})\\.(${s[t.NUMERICIDENTIFIER]})\\.(${s[t.NUMERICIDENTIFIER]})`),a("MAINVERSIONLOOSE",`(${s[t.NUMERICIDENTIFIERLOOSE]})\\.(${s[t.NUMERICIDENTIFIERLOOSE]})\\.(${s[t.NUMERICIDENTIFIERLOOSE]})`),a("PRERELEASEIDENTIFIER",`(?:${s[t.NONNUMERICIDENTIFIER]}|${s[t.NUMERICIDENTIFIER]})`),a("PRERELEASEIDENTIFIERLOOSE",`(?:${s[t.NONNUMERICIDENTIFIER]}|${s[t.NUMERICIDENTIFIERLOOSE]})`),a("PRERELEASE",`(?:-(${s[t.PRERELEASEIDENTIFIER]}(?:\\.${s[t.PRERELEASEIDENTIFIER]})*))`),a("PRERELEASELOOSE",`(?:-?(${s[t.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[t.PRERELEASEIDENTIFIERLOOSE]})*))`),a("BUILDIDENTIFIER",`${u}+`),a("BUILD",`(?:\\+(${s[t.BUILDIDENTIFIER]}(?:\\.${s[t.BUILDIDENTIFIER]})*))`),a("FULLPLAIN",`v?${s[t.MAINVERSION]}${s[t.PRERELEASE]}?${s[t.BUILD]}?`),a("FULL",`^${s[t.FULLPLAIN]}$`),a("LOOSEPLAIN",`[v=\\s]*${s[t.MAINVERSIONLOOSE]}${s[t.PRERELEASELOOSE]}?${s[t.BUILD]}?`),a("LOOSE",`^${s[t.LOOSEPLAIN]}$`),a("GTLT","((?:<|>)?=?)"),a("XRANGEIDENTIFIERLOOSE",`${s[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),a("XRANGEIDENTIFIER",`${s[t.NUMERICIDENTIFIER]}|x|X|\\*`),a("XRANGEPLAIN",`[v=\\s]*(${s[t.XRANGEIDENTIFIER]})(?:\\.(${s[t.XRANGEIDENTIFIER]})(?:\\.(${s[t.XRANGEIDENTIFIER]})(?:${s[t.PRERELEASE]})?${s[t.BUILD]}?)?)?`),a("XRANGEPLAINLOOSE",`[v=\\s]*(${s[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[t.XRANGEIDENTIFIERLOOSE]})(?:${s[t.PRERELEASELOOSE]})?${s[t.BUILD]}?)?)?`),a("XRANGE",`^${s[t.GTLT]}\\s*${s[t.XRANGEPLAIN]}$`),a("XRANGELOOSE",`^${s[t.GTLT]}\\s*${s[t.XRANGEPLAINLOOSE]}$`),a("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),a("COERCE",`${s[t.COERCEPLAIN]}(?:$|[^\\d])`),a("COERCEFULL",s[t.COERCEPLAIN]+`(?:${s[t.PRERELEASE]})?(?:${s[t.BUILD]})?(?:$|[^\\d])`),a("COERCERTL",s[t.COERCE],!0),a("COERCERTLFULL",s[t.COERCEFULL],!0),a("LONETILDE","(?:~>?)"),a("TILDETRIM",`(\\s*)${s[t.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",a("TILDE",`^${s[t.LONETILDE]}${s[t.XRANGEPLAIN]}$`),a("TILDELOOSE",`^${s[t.LONETILDE]}${s[t.XRANGEPLAINLOOSE]}$`),a("LONECARET","(?:\\^)"),a("CARETTRIM",`(\\s*)${s[t.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",a("CARET",`^${s[t.LONECARET]}${s[t.XRANGEPLAIN]}$`),a("CARETLOOSE",`^${s[t.LONECARET]}${s[t.XRANGEPLAINLOOSE]}$`),a("COMPARATORLOOSE",`^${s[t.GTLT]}\\s*(${s[t.LOOSEPLAIN]})$|^$`),a("COMPARATOR",`^${s[t.GTLT]}\\s*(${s[t.FULLPLAIN]})$|^$`),a("COMPARATORTRIM",`(\\s*)${s[t.GTLT]}\\s*(${s[t.LOOSEPLAIN]}|${s[t.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",a("HYPHENRANGE",`^\\s*(${s[t.XRANGEPLAIN]})\\s+-\\s+(${s[t.XRANGEPLAIN]})\\s*$`),a("HYPHENRANGELOOSE",`^\\s*(${s[t.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[t.XRANGEPLAINLOOSE]})\\s*$`),a("STAR","(<|>)?=?\\s*\\*"),a("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),a("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(_,_.exports)),_.exports}var F,K;function Ne(){if(K)return F;K=1;const r=Object.freeze({loose:!0}),e=Object.freeze({});return F=n=>n?typeof n!="object"?r:n:e,F}var G,Y;function Oe(){if(Y)return G;Y=1;const r=/^[0-9]+$/,e=(n,o)=>{const c=r.test(n),f=r.test(o);return c&&f&&(n=+n,o=+o),n===o?0:c&&!f?-1:f&&!c?1:n<o?-1:1};return G={compareIdentifiers:e,rcompareIdentifiers:(n,o)=>e(o,n)},G}var M,q;function ue(){if(q)return M;q=1;const r=Ee(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:n}=ce(),{safeRe:o,t:c}=Re(),f=Ne(),{compareIdentifiers:m}=Oe();class I{constructor(i,t){if(t=f(t),i instanceof I){if(i.loose===!!t.loose&&i.includePrerelease===!!t.includePrerelease)return i;i=i.version}else if(typeof i!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof i}".`);if(i.length>e)throw new TypeError(`version is longer than ${e} characters`);r("SemVer",i,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const E=i.trim().match(t.loose?o[c.LOOSE]:o[c.FULL]);if(!E)throw new TypeError(`Invalid Version: ${i}`);if(this.raw=i,this.major=+E[1],this.minor=+E[2],this.patch=+E[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");E[4]?this.prerelease=E[4].split(".").map(u=>{if(/^[0-9]+$/.test(u)){const p=+u;if(p>=0&&p<n)return p}return u}):this.prerelease=[],this.build=E[5]?E[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(i){if(r("SemVer.compare",this.version,this.options,i),!(i instanceof I)){if(typeof i=="string"&&i===this.version)return 0;i=new I(i,this.options)}return i.version===this.version?0:this.compareMain(i)||this.comparePre(i)}compareMain(i){return i instanceof I||(i=new I(i,this.options)),m(this.major,i.major)||m(this.minor,i.minor)||m(this.patch,i.patch)}comparePre(i){if(i instanceof I||(i=new I(i,this.options)),this.prerelease.length&&!i.prerelease.length)return-1;if(!this.prerelease.length&&i.prerelease.length)return 1;if(!this.prerelease.length&&!i.prerelease.length)return 0;let t=0;do{const E=this.prerelease[t],u=i.prerelease[t];if(r("prerelease compare",t,E,u),E===void 0&&u===void 0)return 0;if(u===void 0)return 1;if(E===void 0)return-1;if(E!==u)return m(E,u)}while(++t)}compareBuild(i){i instanceof I||(i=new I(i,this.options));let t=0;do{const E=this.build[t],u=i.build[t];if(r("build compare",t,E,u),E===void 0&&u===void 0)return 0;if(u===void 0)return 1;if(E===void 0)return-1;if(E!==u)return m(E,u)}while(++t)}inc(i,t,E){if(i.startsWith("pre")){if(!t&&E===!1)throw new Error("invalid increment argument: identifier is empty");if(t){const u=`-${t}`.match(this.options.loose?o[c.PRERELEASELOOSE]:o[c.PRERELEASE]);if(!u||u[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(i){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,E),this.inc("pre",t,E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,E),this.inc("pre",t,E);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const u=Number(E)?1:0;if(this.prerelease.length===0)this.prerelease=[u];else{let p=this.prerelease.length;for(;--p>=0;)typeof this.prerelease[p]=="number"&&(this.prerelease[p]++,p=-2);if(p===-1){if(t===this.prerelease.join(".")&&E===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(u)}}if(t){let p=[t,u];E===!1&&(p=[t]),m(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=p):this.prerelease=p}break}default:throw new Error(`invalid increment argument: ${i}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return M=I,M}var U,Z;function me(){if(Z)return U;Z=1;const r=ue();return U=(e,n)=>new r(e,n).major,U}var ve=me();const J=ne(ve);var x,Q;function Ae(){if(Q)return x;Q=1;const r=ue();return x=(e,n,o=!1)=>{if(e instanceof r)return e;try{return new r(e,n)}catch(c){if(!o)return null;throw c}},x}var X,ee;function $e(){if(ee)return X;ee=1;const r=Ae();return X=(e,n)=>{const o=r(e,n);return o?o.version:null},X}var Te=$e();const ge=ne(Te);class be{bus;constructor(e){typeof e.getVersion!="function"||!ge(e.getVersion())?console.warn("Proxying an event bus with an unknown or invalid version"):J(e.getVersion())!==J(this.getVersion())&&console.warn("Proxying an event bus of version "+e.getVersion()+" with "+this.getVersion()),this.bus=e}getVersion(){return"3.3.3"}subscribe(e,n){this.bus.subscribe(e,n)}unsubscribe(e,n){this.bus.unsubscribe(e,n)}emit(e,...n){this.bus.emit(e,...n)}}class we{handlers=new Map;getVersion(){return"3.3.3"}subscribe(e,n){this.handlers.set(e,(this.handlers.get(e)||[]).concat(n))}unsubscribe(e,n){this.handlers.set(e,(this.handlers.get(e)||[]).filter(o=>o!==n))}emit(e,...n){(this.handlers.get(e)||[]).forEach(o=>{try{o(n[0])}catch(c){console.error("could not invoke event listener",c)}})}}let w=null;function B(){return w!==null?w:typeof window>"u"?new Proxy({},{get:()=>()=>console.error("Window not available, EventBus can not be established!")}):(window.OC?._eventBus&&typeof window._nc_event_bus>"u"&&(console.warn("found old event bus instance at OC._eventBus. Update your version!"),window._nc_event_bus=window.OC._eventBus),typeof window?._nc_event_bus<"u"?w=new be(window._nc_event_bus):w=window._nc_event_bus=new we,w)}function Se(r,e){B().subscribe(r,e)}function Be(r,e){B().unsubscribe(r,e)}function Ve(r,...e){B().emit(r,...e)}class y{static GLOBAL_SCOPE_VOLATILE="nextcloud_vol";static GLOBAL_SCOPE_PERSISTENT="nextcloud_per";scope;wrapped;constructor(e,n,o){this.scope=`${o?y.GLOBAL_SCOPE_PERSISTENT:y.GLOBAL_SCOPE_VOLATILE}_${btoa(e)}_`,this.wrapped=n}scopeKey(e){return`${this.scope}${e}`}setItem(e,n){this.wrapped.setItem(this.scopeKey(e),n)}getItem(e){return this.wrapped.getItem(this.scopeKey(e))}removeItem(e){this.wrapped.removeItem(this.scopeKey(e))}clear(){Object.keys(this.wrapped).filter(e=>e.startsWith(this.scope)).map(this.wrapped.removeItem.bind(this.wrapped))}}class Pe{appId;persisted=!1;clearedOnLogout=!1;constructor(e){this.appId=e}persist(e=!0){return this.persisted=e,this}clearOnLogout(e=!0){return this.clearedOnLogout=e,this}build(){return new y(this.appId,this.persisted?window.localStorage:window.sessionStorage,!this.clearedOnLogout)}}function ye(r){return new Pe(r)}let S;const le=[];function He(){return S===void 0&&(S=document.head.dataset.requesttoken??null),S}function We(r){le.push(r)}Se("csrf-token-update",r=>{S=r.token,le.forEach(e=>{try{e(S)}catch(n){console.error("Error updating CSRF token observer",n)}})});ye("public").persist().build();let T;function te(r,e){return r?r.getAttribute(e):null}function De(){if(T!==void 0)return T;const r=document?.getElementsByTagName("head")[0];if(!r)return null;const e=te(r,"data-user");return e===null?(T=null,T):(T={uid:e,displayName:te(r,"data-user-displayname"),isAdmin:!!window._oc_isadmin},T)}var h=(r=>(r[r.Debug=0]="Debug",r[r.Info=1]="Info",r[r.Warn=2]="Warn",r[r.Error=3]="Error",r[r.Fatal=4]="Fatal",r))(h||{}),Ce=Object.defineProperty,_e=(r,e,n)=>e in r?Ce(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,Fe=(r,e,n)=>(_e(r,e+"",n),n);class Ge{constructor(e){Fe(this,"context"),this.context=e||{}}formatMessage(e,n,o){let c="["+h[n].toUpperCase()+"] ";return o&&o.app&&(c+=o.app+": "),typeof e=="string"?c+e:(c+="Unexpected ".concat(e.name),e.message&&(c+=' "'.concat(e.message,'"')),n===h.Debug&&e.stack&&(c+=`

Stack trace:
`.concat(e.stack)),c)}log(e,n,o){var c,f;if(!(typeof((c=this.context)==null?void 0:c.level)=="number"&&e<((f=this.context)==null?void 0:f.level)))switch(typeof n=="object"&&o?.error===void 0&&(o.error=n),e){case h.Debug:console.debug(this.formatMessage(n,h.Debug,o),o);break;case h.Info:console.info(this.formatMessage(n,h.Info,o),o);break;case h.Warn:console.warn(this.formatMessage(n,h.Warn,o),o);break;case h.Error:console.error(this.formatMessage(n,h.Error,o),o);break;case h.Fatal:default:console.error(this.formatMessage(n,h.Fatal,o),o);break}}debug(e,n){this.log(h.Debug,e,Object.assign({},this.context,n))}info(e,n){this.log(h.Info,e,Object.assign({},this.context,n))}warn(e,n){this.log(h.Warn,e,Object.assign({},this.context,n))}error(e,n){this.log(h.Error,e,Object.assign({},this.context,n))}fatal(e,n){this.log(h.Fatal,e,Object.assign({},this.context,n))}}function Me(r){return new Ge(r)}var Ue=Object.defineProperty,xe=(r,e,n)=>e in r?Ue(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,re=(r,e,n)=>(xe(r,typeof e!="symbol"?e+"":e,n),n);class Xe{constructor(e){re(this,"context"),re(this,"factory"),this.context={},this.factory=e}setApp(e){return this.context.app=e,this}setLogLevel(e){return this.context.level=e,this}setUid(e){return this.context.uid=e,this}detectUser(){const e=De();return e!==null&&(this.context.uid=e.uid),this}detectLogLevel(){const e=this,n=()=>{var o,c;document.readyState==="complete"||document.readyState==="interactive"?(e.context.level=(c=(o=window._oc_config)==null?void 0:o.loglevel)!=null?c:h.Warn,window._oc_debug&&(e.context.level=h.Debug),document.removeEventListener("readystatechange",n)):document.addEventListener("readystatechange",n)};return n(),this}build(){return this.context.level===void 0&&this.detectLogLevel(),this.factory(this.context)}}function je(){return new Xe(Me)}const ze=je().setApp("activity").detectUser().build();export{je as a,De as b,He as c,Ve as e,ye as g,ze as l,We as o,de as p,Se as s,Be as u};
//# sourceMappingURL=logger-Dky0xrMn.chunk.mjs.map
