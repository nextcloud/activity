var fe=Object.defineProperty;var Le=(t,e,n)=>e in t?fe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var L=(t,e,n)=>Le(t,typeof e!="symbol"?e+"":e,n);import{g as ie}from"./_commonjsHelpers-Cqwegr3R.chunk.mjs";function de(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var oe={exports:{}},l=oe.exports={},d,R;function k(){throw new Error("setTimeout has not been defined")}function B(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?d=setTimeout:d=k}catch(t){d=k}try{typeof clearTimeout=="function"?R=clearTimeout:R=B}catch(t){R=B}})();function ae(t){if(d===setTimeout)return setTimeout(t,0);if((d===k||!d)&&setTimeout)return d=setTimeout,setTimeout(t,0);try{return d(t,0)}catch(e){try{return d.call(null,t,0)}catch(n){return d.call(this,t,0)}}}function Re(t){if(R===clearTimeout)return clearTimeout(t);if((R===B||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(t);try{return R(t)}catch(e){try{return R.call(null,t)}catch(n){return R.call(this,t)}}}var m=[],w=!1,A,D=-1;function Ne(){!w||!A||(w=!1,A.length?m=A.concat(m):D=-1,m.length&&Ee())}function Ee(){if(!w){var t=ae(Ne);w=!0;for(var e=m.length;e;){for(A=m,m=[];++D<e;)A&&A[D].run();D=-1,e=m.length}A=null,w=!1,Re(t)}}l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];m.push(new ce(t,e)),m.length===1&&!w&&ae(Ee)};function ce(t,e){this.fun=t,this.array=e}ce.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function O(){}l.on=O,l.addListener=O,l.once=O,l.off=O,l.removeListener=O,l.removeAllListeners=O,l.emit=O,l.prependListener=O,l.prependOnceListener=O,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0};var Oe=oe.exports;const me=de(Oe);var C,z;function ue(){if(z)return C;z=1;var t={};return C=typeof me=="object"&&t&&t.NODE_DEBUG&&/\bsemver\b/i.test(t.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},C}var F,K;function le(){if(K)return F;K=1;const t="2.0.0",e=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,c=e-6;return F={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:c,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},F}var _={exports:{}},Y;function ve(){return Y||(Y=1,(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:c}=le(),f=ue();e=t.exports={};const v=e.re=[],I=e.safeRe=[],s=e.src=[],o=e.safeSrc=[],r=e.t={};let E=0;const u="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",c],[u,i]],Ie=$=>{for(const[N,S]of p)$=$.split("".concat(N,"*")).join("".concat(N,"{0,").concat(S,"}")).split("".concat(N,"+")).join("".concat(N,"{1,").concat(S,"}"));return $},a=($,N,S)=>{const W=Ie(N),T=E++;f($,T,N),r[$]=T,s[T]=N,o[T]=W,v[T]=new RegExp(N,S?"g":void 0),I[T]=new RegExp(W,S?"g":void 0)};a("NUMERICIDENTIFIER","0|[1-9]\\d*"),a("NUMERICIDENTIFIERLOOSE","\\d+"),a("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-]".concat(u,"*")),a("MAINVERSION","(".concat(s[r.NUMERICIDENTIFIER],")\\.(").concat(s[r.NUMERICIDENTIFIER],")\\.(").concat(s[r.NUMERICIDENTIFIER],")")),a("MAINVERSIONLOOSE","(".concat(s[r.NUMERICIDENTIFIERLOOSE],")\\.(").concat(s[r.NUMERICIDENTIFIERLOOSE],")\\.(").concat(s[r.NUMERICIDENTIFIERLOOSE],")")),a("PRERELEASEIDENTIFIER","(?:".concat(s[r.NONNUMERICIDENTIFIER],"|").concat(s[r.NUMERICIDENTIFIER],")")),a("PRERELEASEIDENTIFIERLOOSE","(?:".concat(s[r.NONNUMERICIDENTIFIER],"|").concat(s[r.NUMERICIDENTIFIERLOOSE],")")),a("PRERELEASE","(?:-(".concat(s[r.PRERELEASEIDENTIFIER],"(?:\\.").concat(s[r.PRERELEASEIDENTIFIER],")*))")),a("PRERELEASELOOSE","(?:-?(".concat(s[r.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(s[r.PRERELEASEIDENTIFIERLOOSE],")*))")),a("BUILDIDENTIFIER","".concat(u,"+")),a("BUILD","(?:\\+(".concat(s[r.BUILDIDENTIFIER],"(?:\\.").concat(s[r.BUILDIDENTIFIER],")*))")),a("FULLPLAIN","v?".concat(s[r.MAINVERSION]).concat(s[r.PRERELEASE],"?").concat(s[r.BUILD],"?")),a("FULL","^".concat(s[r.FULLPLAIN],"$")),a("LOOSEPLAIN","[v=\\s]*".concat(s[r.MAINVERSIONLOOSE]).concat(s[r.PRERELEASELOOSE],"?").concat(s[r.BUILD],"?")),a("LOOSE","^".concat(s[r.LOOSEPLAIN],"$")),a("GTLT","((?:<|>)?=?)"),a("XRANGEIDENTIFIERLOOSE","".concat(s[r.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),a("XRANGEIDENTIFIER","".concat(s[r.NUMERICIDENTIFIER],"|x|X|\\*")),a("XRANGEPLAIN","[v=\\s]*(".concat(s[r.XRANGEIDENTIFIER],")(?:\\.(").concat(s[r.XRANGEIDENTIFIER],")(?:\\.(").concat(s[r.XRANGEIDENTIFIER],")(?:").concat(s[r.PRERELEASE],")?").concat(s[r.BUILD],"?)?)?")),a("XRANGEPLAINLOOSE","[v=\\s]*(".concat(s[r.XRANGEIDENTIFIERLOOSE],")(?:\\.(").concat(s[r.XRANGEIDENTIFIERLOOSE],")(?:\\.(").concat(s[r.XRANGEIDENTIFIERLOOSE],")(?:").concat(s[r.PRERELEASELOOSE],")?").concat(s[r.BUILD],"?)?)?")),a("XRANGE","^".concat(s[r.GTLT],"\\s*").concat(s[r.XRANGEPLAIN],"$")),a("XRANGELOOSE","^".concat(s[r.GTLT],"\\s*").concat(s[r.XRANGEPLAINLOOSE],"$")),a("COERCEPLAIN","(^|[^\\d])(\\d{1,".concat(n,"})(?:\\.(\\d{1,").concat(n,"}))?(?:\\.(\\d{1,").concat(n,"}))?")),a("COERCE","".concat(s[r.COERCEPLAIN],"(?:$|[^\\d])")),a("COERCEFULL",s[r.COERCEPLAIN]+"(?:".concat(s[r.PRERELEASE],")?(?:").concat(s[r.BUILD],")?(?:$|[^\\d])")),a("COERCERTL",s[r.COERCE],!0),a("COERCERTLFULL",s[r.COERCEFULL],!0),a("LONETILDE","(?:~>?)"),a("TILDETRIM","(\\s*)".concat(s[r.LONETILDE],"\\s+"),!0),e.tildeTrimReplace="$1~",a("TILDE","^".concat(s[r.LONETILDE]).concat(s[r.XRANGEPLAIN],"$")),a("TILDELOOSE","^".concat(s[r.LONETILDE]).concat(s[r.XRANGEPLAINLOOSE],"$")),a("LONECARET","(?:\\^)"),a("CARETTRIM","(\\s*)".concat(s[r.LONECARET],"\\s+"),!0),e.caretTrimReplace="$1^",a("CARET","^".concat(s[r.LONECARET]).concat(s[r.XRANGEPLAIN],"$")),a("CARETLOOSE","^".concat(s[r.LONECARET]).concat(s[r.XRANGEPLAINLOOSE],"$")),a("COMPARATORLOOSE","^".concat(s[r.GTLT],"\\s*(").concat(s[r.LOOSEPLAIN],")$|^$")),a("COMPARATOR","^".concat(s[r.GTLT],"\\s*(").concat(s[r.FULLPLAIN],")$|^$")),a("COMPARATORTRIM","(\\s*)".concat(s[r.GTLT],"\\s*(").concat(s[r.LOOSEPLAIN],"|").concat(s[r.XRANGEPLAIN],")"),!0),e.comparatorTrimReplace="$1$2$3",a("HYPHENRANGE","^\\s*(".concat(s[r.XRANGEPLAIN],")\\s+-\\s+(").concat(s[r.XRANGEPLAIN],")\\s*$")),a("HYPHENRANGELOOSE","^\\s*(".concat(s[r.XRANGEPLAINLOOSE],")\\s+-\\s+(").concat(s[r.XRANGEPLAINLOOSE],")\\s*$")),a("STAR","(<|>)?=?\\s*\\*"),a("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),a("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(_,_.exports)),_.exports}var G,q;function Ae(){if(q)return G;q=1;const t=Object.freeze({loose:!0}),e=Object.freeze({});return G=n=>n?typeof n!="object"?t:n:e,G}var M,Z;function $e(){if(Z)return M;Z=1;const t=/^[0-9]+$/,e=(n,i)=>{const c=t.test(n),f=t.test(i);return c&&f&&(n=+n,i=+i),n===i?0:c&&!f?-1:f&&!c?1:n<i?-1:1};return M={compareIdentifiers:e,rcompareIdentifiers:(n,i)=>e(i,n)},M}var U,J;function he(){if(J)return U;J=1;const t=ue(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:n}=le(),{safeRe:i,t:c}=ve(),f=Ae(),{compareIdentifiers:v}=$e();class I{constructor(o,r){if(r=f(r),o instanceof I){if(o.loose===!!r.loose&&o.includePrerelease===!!r.includePrerelease)return o;o=o.version}else if(typeof o!="string")throw new TypeError('Invalid version. Must be a string. Got type "'.concat(typeof o,'".'));if(o.length>e)throw new TypeError("version is longer than ".concat(e," characters"));t("SemVer",o,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const E=o.trim().match(r.loose?i[c.LOOSE]:i[c.FULL]);if(!E)throw new TypeError("Invalid Version: ".concat(o));if(this.raw=o,this.major=+E[1],this.minor=+E[2],this.patch=+E[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");E[4]?this.prerelease=E[4].split(".").map(u=>{if(/^[0-9]+$/.test(u)){const p=+u;if(p>=0&&p<n)return p}return u}):this.prerelease=[],this.build=E[5]?E[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(o){if(t("SemVer.compare",this.version,this.options,o),!(o instanceof I)){if(typeof o=="string"&&o===this.version)return 0;o=new I(o,this.options)}return o.version===this.version?0:this.compareMain(o)||this.comparePre(o)}compareMain(o){return o instanceof I||(o=new I(o,this.options)),v(this.major,o.major)||v(this.minor,o.minor)||v(this.patch,o.patch)}comparePre(o){if(o instanceof I||(o=new I(o,this.options)),this.prerelease.length&&!o.prerelease.length)return-1;if(!this.prerelease.length&&o.prerelease.length)return 1;if(!this.prerelease.length&&!o.prerelease.length)return 0;let r=0;do{const E=this.prerelease[r],u=o.prerelease[r];if(t("prerelease compare",r,E,u),E===void 0&&u===void 0)return 0;if(u===void 0)return 1;if(E===void 0)return-1;if(E!==u)return v(E,u)}while(++r)}compareBuild(o){o instanceof I||(o=new I(o,this.options));let r=0;do{const E=this.build[r],u=o.build[r];if(t("build compare",r,E,u),E===void 0&&u===void 0)return 0;if(u===void 0)return 1;if(E===void 0)return-1;if(E!==u)return v(E,u)}while(++r)}inc(o,r,E){if(o.startsWith("pre")){if(!r&&E===!1)throw new Error("invalid increment argument: identifier is empty");if(r){const u="-".concat(r).match(this.options.loose?i[c.PRERELEASELOOSE]:i[c.PRERELEASE]);if(!u||u[1]!==r)throw new Error("invalid identifier: ".concat(r))}}switch(o){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,E);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,E);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,E),this.inc("pre",r,E);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,E),this.inc("pre",r,E);break;case"release":if(this.prerelease.length===0)throw new Error("version ".concat(this.raw," is not a prerelease"));this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const u=Number(E)?1:0;if(this.prerelease.length===0)this.prerelease=[u];else{let p=this.prerelease.length;for(;--p>=0;)typeof this.prerelease[p]=="number"&&(this.prerelease[p]++,p=-2);if(p===-1){if(r===this.prerelease.join(".")&&E===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(u)}}if(r){let p=[r,u];E===!1&&(p=[r]),v(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=p):this.prerelease=p}break}default:throw new Error("invalid increment argument: ".concat(o))}return this.raw=this.format(),this.build.length&&(this.raw+="+".concat(this.build.join("."))),this}}return U=I,U}var x,Q;function Te(){if(Q)return x;Q=1;const t=he();return x=(e,n)=>new t(e,n).major,x}var ge=Te();const ee=ie(ge);var X,te;function be(){if(te)return X;te=1;const t=he();return X=(e,n,i=!1)=>{if(e instanceof t)return e;try{return new t(e,n)}catch(c){if(!i)return null;throw c}},X}var j,re;function we(){if(re)return j;re=1;const t=be();return j=(e,n)=>{const i=t(e,n);return i?i.version:null},j}var Se=we();const Pe=ie(Se);class ye{constructor(e){L(this,"bus");typeof e.getVersion!="function"||!Pe(e.getVersion())?console.warn("Proxying an event bus with an unknown or invalid version"):ee(e.getVersion())!==ee(this.getVersion())&&console.warn("Proxying an event bus of version "+e.getVersion()+" with "+this.getVersion()),this.bus=e}getVersion(){return"3.3.3"}subscribe(e,n){this.bus.subscribe(e,n)}unsubscribe(e,n){this.bus.unsubscribe(e,n)}emit(e,...n){this.bus.emit(e,...n)}}class De{constructor(){L(this,"handlers",new Map)}getVersion(){return"3.3.3"}subscribe(e,n){this.handlers.set(e,(this.handlers.get(e)||[]).concat(n))}unsubscribe(e,n){this.handlers.set(e,(this.handlers.get(e)||[]).filter(i=>i!==n))}emit(e,...n){(this.handlers.get(e)||[]).forEach(i=>{try{i(n[0])}catch(c){console.error("could not invoke event listener",c)}})}}let P=null;function H(){var t;return P!==null?P:typeof window>"u"?new Proxy({},{get:()=>()=>console.error("Window not available, EventBus can not be established!")}):((t=window.OC)!=null&&t._eventBus&&typeof window._nc_event_bus>"u"&&(console.warn("found old event bus instance at OC._eventBus. Update your version!"),window._nc_event_bus=window.OC._eventBus),typeof(window==null?void 0:window._nc_event_bus)<"u"?P=new ye(window._nc_event_bus):P=window._nc_event_bus=new De,P)}function Ce(t,e){H().subscribe(t,e)}function Ke(t,e){H().unsubscribe(t,e)}function Ye(t,...e){H().emit(t,...e)}const b=class b{constructor(e,n,i){L(this,"scope");L(this,"wrapped");this.scope="".concat(i?b.GLOBAL_SCOPE_PERSISTENT:b.GLOBAL_SCOPE_VOLATILE,"_").concat(btoa(e),"_"),this.wrapped=n}scopeKey(e){return"".concat(this.scope).concat(e)}setItem(e,n){this.wrapped.setItem(this.scopeKey(e),n)}getItem(e){return this.wrapped.getItem(this.scopeKey(e))}removeItem(e){this.wrapped.removeItem(this.scopeKey(e))}clear(){Object.keys(this.wrapped).filter(e=>e.startsWith(this.scope)).map(this.wrapped.removeItem.bind(this.wrapped))}};L(b,"GLOBAL_SCOPE_VOLATILE","nextcloud_vol"),L(b,"GLOBAL_SCOPE_PERSISTENT","nextcloud_per");let V=b;class Fe{constructor(e){L(this,"appId");L(this,"persisted",!1);L(this,"clearedOnLogout",!1);this.appId=e}persist(e=!0){return this.persisted=e,this}clearOnLogout(e=!0){return this.clearedOnLogout=e,this}build(){return new V(this.appId,this.persisted?window.localStorage:window.sessionStorage,!this.clearedOnLogout)}}function _e(t){return new Fe(t)}let y;const pe=[];function qe(){var t;return y===void 0&&(y=(t=document.head.dataset.requesttoken)!=null?t:null),y}function Ze(t){pe.push(t)}Ce("csrf-token-update",t=>{y=t.token,pe.forEach(e=>{try{e(y)}catch(n){console.error("Error updating CSRF token observer",n)}})});_e("public").persist().build();let g;function ne(t,e){return t?t.getAttribute(e):null}function Ge(){if(g!==void 0)return g;const t=document==null?void 0:document.getElementsByTagName("head")[0];if(!t)return null;const e=ne(t,"data-user");return e===null?(g=null,g):(g={uid:e,displayName:ne(t,"data-user-displayname"),isAdmin:!!window._oc_isadmin},g)}var h=(t=>(t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Fatal=4]="Fatal",t))(h||{}),Me=Object.defineProperty,Ue=(t,e,n)=>e in t?Me(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xe=(t,e,n)=>(Ue(t,e+"",n),n);class Xe{constructor(e){xe(this,"context"),this.context=e||{}}formatMessage(e,n,i){let c="["+h[n].toUpperCase()+"] ";return i&&i.app&&(c+=i.app+": "),typeof e=="string"?c+e:(c+="Unexpected ".concat(e.name),e.message&&(c+=' "'.concat(e.message,'"')),n===h.Debug&&e.stack&&(c+="\n\nStack trace:\n".concat(e.stack)),c)}log(e,n,i){var c,f;if(!(typeof((c=this.context)==null?void 0:c.level)=="number"&&e<((f=this.context)==null?void 0:f.level)))switch(typeof n=="object"&&(i==null?void 0:i.error)===void 0&&(i.error=n),e){case h.Debug:console.debug(this.formatMessage(n,h.Debug,i),i);break;case h.Info:console.info(this.formatMessage(n,h.Info,i),i);break;case h.Warn:console.warn(this.formatMessage(n,h.Warn,i),i);break;case h.Error:console.error(this.formatMessage(n,h.Error,i),i);break;case h.Fatal:default:console.error(this.formatMessage(n,h.Fatal,i),i);break}}debug(e,n){this.log(h.Debug,e,Object.assign({},this.context,n))}info(e,n){this.log(h.Info,e,Object.assign({},this.context,n))}warn(e,n){this.log(h.Warn,e,Object.assign({},this.context,n))}error(e,n){this.log(h.Error,e,Object.assign({},this.context,n))}fatal(e,n){this.log(h.Fatal,e,Object.assign({},this.context,n))}}function je(t){return new Xe(t)}var ke=Object.defineProperty,Be=(t,e,n)=>e in t?ke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,se=(t,e,n)=>(Be(t,typeof e!="symbol"?e+"":e,n),n);class Ve{constructor(e){se(this,"context"),se(this,"factory"),this.context={},this.factory=e}setApp(e){return this.context.app=e,this}setLogLevel(e){return this.context.level=e,this}setUid(e){return this.context.uid=e,this}detectUser(){const e=Ge();return e!==null&&(this.context.uid=e.uid),this}detectLogLevel(){const e=this,n=()=>{var i,c;document.readyState==="complete"||document.readyState==="interactive"?(e.context.level=(c=(i=window._oc_config)==null?void 0:i.loglevel)!=null?c:h.Warn,window._oc_debug&&(e.context.level=h.Debug),document.removeEventListener("readystatechange",n)):document.addEventListener("readystatechange",n)};return n(),this}build(){return this.context.level===void 0&&this.detectLogLevel(),this.factory(this.context)}}function He(){return new Ve(je)}const Je=He().setApp("activity").detectUser().build();export{Ge as a,qe as b,He as c,Ye as e,_e as g,Je as l,Ze as o,me as p,Ce as s,Ke as u};
//# sourceMappingURL=logger-DyuiKUEW.chunk.mjs.map
