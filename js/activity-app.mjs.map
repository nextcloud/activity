{"version":3,"file":"activity-app.mjs","sources":["../src/views/ActivityApp.vue","../src/components/ActivityGroup.vue","../img/activity-dark.svg?raw","../src/views/ActivityAppFeed.vue","../node_modules/vue-material-design-icons/ContentCopy.vue","../src/views/ActivityAppNavigation.vue","../src/routes.ts","../src/app.ts"],"sourcesContent":["<!--\n  - SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<NcContent app-name=\"activity\">\n\t\t<router-view name=\"navigation\" />\n\t\t<router-view />\n\t</NcContent>\n</template>\n\n<script setup lang=\"ts\">\nimport NcContent from '@nextcloud/vue/components/NcContent'\n</script>\n","<!--\n  - SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<h2 class=\"activity-group__heading\" :title=\"fullDate\">\n\t\t{{ dateText }}\n\t</h2>\n\t<ul>\n\t\t<ActivityComponent\n\t\t\tv-for=\"activity in activities\"\n\t\t\t:key=\"activity.id\"\n\t\t\t:activity=\"activity\"\n\t\t\t:show-previews=\"true\" />\n\t</ul>\n</template>\n\n<script setup lang=\"ts\">\nimport type ActivityModel from '../models/ActivityModel.ts'\n\nimport { translate as t } from '@nextcloud/l10n'\nimport moment from '@nextcloud/moment'\nimport { computed } from 'vue'\nimport ActivityComponent from './ActivityComponent.vue'\n\nconst props = defineProps<{\n\tactivities: ActivityModel[]\n}>()\n\n/**\n * Title to show for the date either Today, Yesterday or the full date\n */\nconst dateText = computed(() => {\n\tconst today = moment()\n\tconst yesterday = moment().subtract(1, 'day')\n\tconst first = moment(props.activities[0].datetime)\n\n\tif (first.isSame(today, 'day')) {\n\t\treturn t('activity', 'Today')\n\t} else if (first.isSame(yesterday, 'day')) {\n\t\treturn t('activity', 'Yesterday')\n\t}\n\treturn first.format('LL')\n})\n\n/**\n * If the heading is yesterday or today, show the full date as title, otherwise no title is shown\n */\nconst fullDate = computed(() => {\n\tconst formatted = moment(props.activities[0].datetime).format('LL')\n\treturn formatted !== dateText.value ? formatted : undefined\n})\n</script>\n\n<style scoped lang=\"scss\">\n.activity-group {\n\t&__heading {\n\t\tline-height: 1.5;\n\t\tmargin-block: 30px 12px;\n\n\t\t&:first-of-type {\n\t\t\t// Already padding from h1\n\t\t\tmargin-block-start: 0;\n\t\t}\n\t}\n}\n</style>\n","export default \"<svg viewBox=\\\"0 0 32 32\\\" height=\\\"32\\\" width=\\\"32\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xml:space=\\\"preserve\\\" style=\\\"fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2\\\"><path d=\\\"m8 22 1-7H4l9-13h2l-1 8h6L10 22H8Z\\\" style=\\\"fill-rule:nonzero\\\" transform=\\\"matrix(1.5 0 0 1.5 -2 -2)\\\"/></svg>\"","<!--\n  - SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n<template>\n\t<NcAppContent class=\"activity-app\">\n\t\t<h1 class=\"activity-app__heading\">\n\t\t\t{{ headingTitle }}\n\t\t</h1>\n\t\t<NcEmptyContent\n\t\t\tv-if=\"hasMoreActivites && allActivities.length === 0\"\n\t\t\tclass=\"activity-app__empty-content\"\n\t\t\t:name=\"t('activity', 'Loading activities')\"\n\t\t\t:description=\"t('activity', 'This stream will show events like additions, changes & shares')\">\n\t\t\t<template #icon>\n\t\t\t\t<NcLoadingIcon :size=\"36\" />\n\t\t\t</template>\n\t\t</NcEmptyContent>\n\t\t<NcEmptyContent\n\t\t\tv-else-if=\"allActivities.length === 0\"\n\t\t\tclass=\"activity-app__empty-content\"\n\t\t\t:name=\"t('activity', 'No activity yet')\"\n\t\t\t:description=\"t('activity', 'This stream will show events like additions, changes & shares')\">\n\t\t\t<template #icon>\n\t\t\t\t<NcIconSvgWrapper :svg=\"appIconSVG\" :size=\"36\" />\n\t\t\t</template>\n\t\t</NcEmptyContent>\n\t\t<div ref=\"container\" class=\"activity-app__container\">\n\t\t\t<ActivityGroup v-for=\"activities, date of groupedActivities\" :key=\"date\" :activities=\"activities\" />\n\t\t\t<!-- Only show if not showing the inital empty content for loading -->\n\t\t\t<NcLoadingIcon\n\t\t\t\tv-if=\"hasMoreActivites && allActivities.length > 0\"\n\t\t\t\t:name=\"t('activity', 'Loading more activities')\"\n\t\t\t\t:size=\"64\"\n\t\t\t\tclass=\"activity-app__loading-indicator\" />\n\t\t\t<div\n\t\t\t\tv-else-if=\"!hasMoreActivites && allActivities.length > 0\"\n\t\t\t\tclass=\"activity-app__loading-indicator\">\n\t\t\t\t{{ t('activity', 'No more activities.') }}\n\t\t\t</div>\n\t\t</div>\n\t</NcAppContent>\n</template>\n\n<script setup lang=\"ts\">\nimport ncAxios from '@nextcloud/axios'\nimport { showError } from '@nextcloud/dialogs'\nimport { loadState } from '@nextcloud/initial-state'\nimport { translate as t } from '@nextcloud/l10n'\nimport moment from '@nextcloud/moment'\nimport { generateOcsUrl } from '@nextcloud/router'\nimport { useInfiniteScroll } from '@vueuse/core'\nimport axios from 'axios'\nimport { computed, nextTick, onMounted, ref, watch } from 'vue'\nimport { useRoute } from 'vue-router'\nimport NcAppContent from '@nextcloud/vue/components/NcAppContent'\nimport NcEmptyContent from '@nextcloud/vue/components/NcEmptyContent'\nimport NcIconSvgWrapper from '@nextcloud/vue/components/NcIconSvgWrapper'\nimport NcLoadingIcon from '@nextcloud/vue/components/NcLoadingIcon'\nimport ActivityGroup from '../components/ActivityGroup.vue'\nimport appIconSVG from '../../img/activity-dark.svg?raw'\nimport ActivityModel from '../models/ActivityModel.ts'\nimport logger from '../utils/logger.ts'\n\ninterface INavigationEntry {\n\tid: string\n\ticon?: string\n\tname: string\n\turl: string\n}\n\nconst navigationList = loadState<INavigationEntry[]>(appName, 'navigationList')\n\nconst route = useRoute()\n\nconst props = withDefaults(defineProps<{\n\t/**\n\t * The currently active activities filter\n\t */\n\tfilter?: string\n}>(), {\n\t// default to 'all'\n\tfilter: 'all',\n})\n\n/**\n * Whether activities are currently being loaded\n */\nconst loading = ref(false)\n\n/**\n * Whether more activites can be loaded\n */\nconst hasMoreActivites = ref(true)\n\n/**\n * All loaded actvities\n */\nconst allActivities = ref<ActivityModel[]>([])\n\n/**\n * Last loaded activity\n * This is set by the backend in the API result as a header value for pagination\n */\nconst lastActivityLoaded = ref<string>()\n\n/**\n * Container element for the activites\n */\nconst container = ref<HTMLDivElement>()\n\n/**\n * Use infinite scroll for the container and load activities when reaching the bottom\n */\nuseInfiniteScroll(container, async () => {\n\tif (hasMoreActivites.value) {\n\t\tawait loadActivities()\n\t}\n}, {\n\tdistance: 100,\n})\n\n/**\n * Activities grouped by date\n */\nconst groupedActivities = computed(() => {\n\tconst groups = {} as Record<string, ActivityModel[]>\n\tfor (const activity of allActivities.value) {\n\t\tconst date = moment(activity.datetime).format('LL')\n\t\tif (groups[date] === undefined) {\n\t\t\tgroups[date] = [activity]\n\t\t} else {\n\t\t\tgroups[date].push(activity)\n\t\t}\n\t}\n\treturn groups\n})\n\nconst headingTitle = computed(() => {\n\treturn navigationList.find((navigationEl) => navigationEl.id === route.params.filter).name\n})\n\n/**\n * Load activites for current filter or load more if already loaded\n */\nasync function loadActivities() {\n\t// Skip if already loading\n\tif (loading.value) {\n\t\treturn\n\t}\n\n\ttry {\n\t\tconst since = lastActivityLoaded.value ?? '0'\n\t\tloading.value = true\n\t\tconst response = await ncAxios.get(generateOcsUrl('apps/activity/api/v2/activity/{filter}?format=json&previews=true&since={since}', { filter: props.filter, since }))\n\t\tallActivities.value.push(...response.data.ocs.data.map((raw) => new ActivityModel(raw)))\n\t\tlastActivityLoaded.value = response.headers['x-activity-last-given']\n\t\thasMoreActivites.value = true\n\n\t\tnextTick(async () => {\n\t\t\tif (container.value && container.value.clientHeight === container.value.scrollHeight) {\n\t\t\t\t// Container is non-scrollable, thus useInfiniteScroll isn't triggered\n\t\t\t\t// Do it manually to ensure there are no activities to fetch anymore\n\t\t\t\tawait loadActivities()\n\t\t\t}\n\t\t})\n\t} catch (error) {\n\t\t// Skip if no activites are available\n\t\tif (axios.isAxiosError(error) && error.response?.status === 304) {\n\t\t\thasMoreActivites.value = false\n\t\t\treturn\n\t\t}\n\n\t\tlogger.error(error as Error)\n\t\tshowError(t('activity', 'Could not load activities'))\n\t} finally {\n\t\tloading.value = false\n\t}\n}\n\n/**\n * Load activites when mounted\n */\nonMounted(() => {\n\tloadActivities()\n})\n\n/**\n * Reload activities when filter changed\n */\nwatch(props, () => {\n\tallActivities.value = []\n\tlastActivityLoaded.value = undefined\n\tloadActivities()\n})\n</script>\n\n<style scoped lang=\"scss\">\n.activity-app {\n\tdisplay: flex;\n\tflex-direction: column;\n\toverflow: hidden;\n\n\t&__empty-content {\n\t\theight: 100%;\n\t}\n\n\t&__loading-indicator {\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tjustify-self: center;\n\t\tmargin-block: 30px 6px;\n\t\ttext-align: center;\n\t}\n\n\t&__container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\theight: 100%;\n\t\twidth: min(100%, 924px);\n\t\tmax-width: 924px;\n\t\tmargin: 0 auto;\n\t\tpadding-inline: 12px;\n\t\toverflow-y: scroll;\n\t}\n\n\t&__heading {\n\t\tfont-weight: bold;\n\t\tfont-size: 20px;\n\t\tline-height: 44px; // to align height with the app navigation toggle\n\t\t// Align with app navigation toggle\n\t\tmargin-top: 1px;\n\t\tmargin-inline: calc(2 * var(--app-navigation-padding, 8px) + 44px) var(--app-navigation-padding, 8px);\n\t}\n}\n</style>\n","<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon content-copy-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"ContentCopyIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<!--\n  - SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<NcAppNavigation :aria-label=\"t('activity', 'Activity')\">\n\t\t<template #list>\n\t\t\t<NcAppNavigationItem\n\t\t\t\tv-for=\"navigationItem in navigationList\"\n\t\t\t\t:key=\"navigationItem.id\"\n\t\t\t\t:data-navigation=\"navigationItem.id\"\n\t\t\t\t:to=\"navigationItem.id\"\n\t\t\t\t:name=\"navigationItem.name\">\n\t\t\t\t<template v-if=\"navigationItem.icon\" #icon>\n\t\t\t\t\t<img\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t:src=\"navigationItem.icon\"\n\t\t\t\t\t\tclass=\"navigation-icon\"\n\t\t\t\t\t\trole=\"presentation\">\n\t\t\t\t</template>\n\t\t\t</NcAppNavigationItem>\n\t\t</template>\n\t\t<template #footer>\n\t\t\t<NcAppNavigationSettings :name=\"t('activity', 'Activity settings')\">\n\t\t\t\t<NcCheckboxRadioSwitch type=\"switch\" v-model=\"hasRSSLink\" @update:model-value=\"toggleRSSLink\">\n\t\t\t\t\t{{ t('activity', 'Enable RSS feed') }}\n\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t<NcInputField\n\t\t\t\t\tv-if=\"hasRSSLink\"\n\t\t\t\t\tv-model=\"rssLink\"\n\t\t\t\t\t:label=\"t('activity', 'RSS feed')\"\n\t\t\t\t\t:show-trailing-button=\"true\"\n\t\t\t\t\t:trailing-button-label=\"t('activity', 'Copy RSS feed link')\"\n\t\t\t\t\treadonly=\"readonly\"\n\t\t\t\t\t@trailing-button-click=\"copyRSSLink\">\n\t\t\t\t\t<template #trailing-button-icon>\n\t\t\t\t\t\t<IconContentCopy :size=\"20\" />\n\t\t\t\t\t</template>\n\t\t\t\t</NcInputField>\n\t\t\t\t<NcButton\n\t\t\t\t\tclass=\"settings-link\"\n\t\t\t\t\t:href=\"personalSettingsLink\"\n\t\t\t\t\t:title=\"t('activity', 'Personal notification settings')\"\n\t\t\t\t\tvariant=\"tertiary\">\n\t\t\t\t\t{{ t('activity', 'Personal notification settings') }}\n\t\t\t\t</NcButton>\n\t\t\t</NcAppNavigationSettings>\n\t\t</template>\n\t</NcAppNavigation>\n</template>\n\n<script setup lang=\"ts\">\nimport axios from '@nextcloud/axios'\nimport { showError, showSuccess } from '@nextcloud/dialogs'\nimport { loadState } from '@nextcloud/initial-state'\nimport { translate as t } from '@nextcloud/l10n'\nimport { generateUrl } from '@nextcloud/router'\nimport { computed, ref } from 'vue'\nimport NcAppNavigation from '@nextcloud/vue/components/NcAppNavigation'\nimport NcAppNavigationItem from '@nextcloud/vue/components/NcAppNavigationItem'\nimport NcAppNavigationSettings from '@nextcloud/vue/components/NcAppNavigationSettings'\nimport NcButton from '@nextcloud/vue/components/NcButton'\nimport NcCheckboxRadioSwitch from '@nextcloud/vue/components/NcCheckboxRadioSwitch'\nimport NcInputField from '@nextcloud/vue/components/NcInputField'\nimport IconContentCopy from 'vue-material-design-icons/ContentCopy.vue'\nimport logger from '../utils/logger.ts'\n\n// Types\ninterface INavigationEntry {\n\tid: string\n\ticon?: string\n\tname: string\n\turl: string\n}\n\ninterface IActivitySettings {\n\tenableAvatars: boolean\n\trssLink: string\n\tpersonalSettingsLink: string\n}\n\n// Variables and methods\nconst {\n\trssLink: initialRSSLink,\n\tpersonalSettingsLink,\n} = loadState<IActivitySettings>(appName, 'settings')\n\nconst navigationList = loadState<INavigationEntry[]>(appName, 'navigationList')\n\n/**\n * The current rss link, either a valid URL or an empty string\n */\nconst rssLink = ref(initialRSSLink)\n\n/**\n * True if a RSS link is configures / enabled. False otherwise.\n */\nconst hasRSSLink = computed(() => !!rssLink.value)\n\n/**\n * Toggle the enabled state of the RSS link\n */\nasync function toggleRSSLink() {\n\ttry {\n\t\tconst { data } = await axios.post<{ data: { rsslink: string } }>(generateUrl('/apps/activity/settings/feed'), {\n\t\t\tenable: !hasRSSLink.value,\n\t\t})\n\t\trssLink.value = data.data.rsslink\n\t} catch (e) {\n\t\tshowError(t('activity', 'Could not enable RSS link'))\n\t\tlogger.error(e as Error)\n\t}\n}\n\n/**\n * Copy the RSS link to the clipboard\n */\nasync function copyRSSLink() {\n\ttry {\n\t\twindow.navigator.clipboard.writeText(rssLink.value)\n\t\tshowSuccess(t('activity', 'RSS link copied to clipboard'))\n\t} catch (e) {\n\t\tlogger.debug(e as Error)\n\t\t// If the user is running Nextcloud in a non secure context (secure = HTTPS or HTTP on localhost) then Clipboard API fail and the user must copy manually\n\t\twindow.prompt(t('activity', 'Could not copy the RSS link, please copy manually:'), rssLink.value)\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.app-activity {\n\t.settings-link {\n\t\tmax-width: 100%;\n\t}\n\n\t.app-navigation-entry {\n\t\t&.active .navigation-icon {\n\t\t\tfilter: var(--primary-invert-if-dark);\n\t\t}\n\n\t\t&:not(.active) .navigation-icon {\n\t\t\tfilter: var(--background-invert-if-dark);\n\t\t}\n\t}\n\n\t.navigation-icon {\n\t\theight: 16px;\n\t\twidth: 16px;\n\t}\n}\n</style>\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport type { RouteRecordRaw } from 'vue-router'\n\nimport ActivityAppFeed from './views/ActivityAppFeed.vue'\nimport ActivityAppNavigation from './views/ActivityAppNavigation.vue'\n\nexport const routes = [\n\t{\n\t\tpath: '/',\n\t\tname: 'root',\n\t\tredirect: { path: '/all' },\n\t},\n\t{\n\t\tpath: '/:filter?',\n\t\tcomponents: {\n\t\t\tdefault: ActivityAppFeed,\n\t\t\tnavigation: ActivityAppNavigation,\n\t\t},\n\t\tprops: {\n\t\t\tdefault: true,\n\t\t},\n\t},\n] as RouteRecordRaw[]\n","/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { generateUrl } from '@nextcloud/router'\nimport { createApp } from 'vue'\nimport { createRouter, createWebHistory } from 'vue-router'\nimport ActivityApp from './views/ActivityApp.vue'\nimport { routes } from './routes.ts'\n\nconst router = createRouter({\n\thistory: createWebHistory(generateUrl('/apps/activity')),\n\tlinkActiveClass: 'active',\n\troutes,\n})\n\nconst app = createApp(ActivityApp)\napp.use(router)\napp.mount('#content')\n"],"names":["_createBlock","_unref","NcContent","_createVNode","_component_router_view","props","__props","dateText","computed","today","moment","yesterday","first","t","fullDate","formatted","_createElementVNode","_hoisted_1","_createElementBlock","_Fragment","_renderList","activity","ActivityComponent","appIconSVG","navigationList","loadState","appName","route","useRoute","loading","ref","hasMoreActivites","allActivities","lastActivityLoaded","container","useInfiniteScroll","loadActivities","groupedActivities","groups","date","headingTitle","navigationEl","since","response","ncAxios","generateOcsUrl","raw","ActivityModel","nextTick","error","axios","logger","showError","onMounted","watch","NcAppContent","_toDisplayString","NcEmptyContent","NcLoadingIcon","NcIconSvgWrapper","_openBlock","activities","ActivityGroup","_hoisted_2","_sfc_main","_hoisted_3","_mergeProps","_ctx","$props","_cache","$event","initialRSSLink","personalSettingsLink","rssLink","hasRSSLink","toggleRSSLink","data","generateUrl","e","copyRSSLink","showSuccess","NcAppNavigation","navigationItem","NcAppNavigationItem","NcAppNavigationSettings","NcCheckboxRadioSwitch","NcInputField","IconContentCopy","NcButton","routes","ActivityAppFeed","ActivityAppNavigation","router","createRouter","createWebHistory","app","createApp","ActivityApp"],"mappings":"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","x_google_ignoreList":[4]}