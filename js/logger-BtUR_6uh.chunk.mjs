/*! third party licenses: js/vendor.LICENSE.txt */
import{g as q}from"./_commonjsHelpers-BdswosdL.chunk.mjs";function fe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var J={exports:{}},l=J.exports={},h,p;function U(){throw new Error("setTimeout has not been defined")}function j(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?h=setTimeout:h=U}catch{h=U}try{typeof clearTimeout=="function"?p=clearTimeout:p=j}catch{p=j}})();function Q(t){if(h===setTimeout)return setTimeout(t,0);if((h===U||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch{try{return h.call(null,t,0)}catch{return h.call(this,t,0)}}}function Ie(t){if(p===clearTimeout)return clearTimeout(t);if((p===j||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch{try{return p.call(null,t)}catch{return p.call(this,t)}}}var I=[],O=!1,L,P=-1;function Le(){!O||!L||(O=!1,L.length?I=L.concat(I):P=-1,I.length&&ee())}function ee(){if(!O){var t=Q(Le);O=!0;for(var e=I.length;e;){for(L=I,I=[];++P<e;)L&&L[P].run();P=-1,e=I.length}L=null,O=!1,Ie(t)}}l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];I.push(new te(t,e)),I.length===1&&!O&&Q(ee)};function te(t,e){this.fun=t,this.array=e}te.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function f(){}l.on=f,l.addListener=f,l.once=f,l.off=f,l.removeListener=f,l.removeAllListeners=f,l.emit=f,l.prependListener=f,l.prependOnceListener=f,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0};var me=J.exports;const ve=fe(me);var F={};const Ne=typeof ve=="object"&&F&&F.NODE_DEBUG&&/\bsemver\b/i.test(F.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var re=Ne;const se=256,Re=Number.MAX_SAFE_INTEGER||9007199254740991,Oe=16,ge=se-6;var ne={MAX_LENGTH:se,MAX_SAFE_COMPONENT_LENGTH:Oe,MAX_SAFE_BUILD_LENGTH:ge,MAX_SAFE_INTEGER:Re},x={exports:{}};(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:s,MAX_LENGTH:a}=ne,c=re;e=t.exports={};const le=e.re=[],Ee=e.safeRe=[],n=e.src=[],ue=e.safeSrc=[],i=e.t={};let he=0;const M="[a-zA-Z0-9-]",pe=[["\\s",1],["\\d",a],[M,s]],de=m=>{for(const[d,b]of pe)m=m.split(`${d}*`).join(`${d}{0,${b}}`).split(`${d}+`).join(`${d}{1,${b}}`);return m},o=(m,d,b)=>{const k=de(d),v=he++;c(m,v,d),i[m]=v,n[v]=d,ue[v]=k,le[v]=new RegExp(d,b?"g":void 0),Ee[v]=new RegExp(k,b?"g":void 0)};o("NUMERICIDENTIFIER","0|[1-9]\\d*"),o("NUMERICIDENTIFIERLOOSE","\\d+"),o("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${M}*`),o("MAINVERSION",`(${n[i.NUMERICIDENTIFIER]})\\.(${n[i.NUMERICIDENTIFIER]})\\.(${n[i.NUMERICIDENTIFIER]})`),o("MAINVERSIONLOOSE",`(${n[i.NUMERICIDENTIFIERLOOSE]})\\.(${n[i.NUMERICIDENTIFIERLOOSE]})\\.(${n[i.NUMERICIDENTIFIERLOOSE]})`),o("PRERELEASEIDENTIFIER",`(?:${n[i.NUMERICIDENTIFIER]}|${n[i.NONNUMERICIDENTIFIER]})`),o("PRERELEASEIDENTIFIERLOOSE",`(?:${n[i.NUMERICIDENTIFIERLOOSE]}|${n[i.NONNUMERICIDENTIFIER]})`),o("PRERELEASE",`(?:-(${n[i.PRERELEASEIDENTIFIER]}(?:\\.${n[i.PRERELEASEIDENTIFIER]})*))`),o("PRERELEASELOOSE",`(?:-?(${n[i.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${n[i.PRERELEASEIDENTIFIERLOOSE]})*))`),o("BUILDIDENTIFIER",`${M}+`),o("BUILD",`(?:\\+(${n[i.BUILDIDENTIFIER]}(?:\\.${n[i.BUILDIDENTIFIER]})*))`),o("FULLPLAIN",`v?${n[i.MAINVERSION]}${n[i.PRERELEASE]}?${n[i.BUILD]}?`),o("FULL",`^${n[i.FULLPLAIN]}$`),o("LOOSEPLAIN",`[v=\\s]*${n[i.MAINVERSIONLOOSE]}${n[i.PRERELEASELOOSE]}?${n[i.BUILD]}?`),o("LOOSE",`^${n[i.LOOSEPLAIN]}$`),o("GTLT","((?:<|>)?=?)"),o("XRANGEIDENTIFIERLOOSE",`${n[i.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),o("XRANGEIDENTIFIER",`${n[i.NUMERICIDENTIFIER]}|x|X|\\*`),o("XRANGEPLAIN",`[v=\\s]*(${n[i.XRANGEIDENTIFIER]})(?:\\.(${n[i.XRANGEIDENTIFIER]})(?:\\.(${n[i.XRANGEIDENTIFIER]})(?:${n[i.PRERELEASE]})?${n[i.BUILD]}?)?)?`),o("XRANGEPLAINLOOSE",`[v=\\s]*(${n[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${n[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${n[i.XRANGEIDENTIFIERLOOSE]})(?:${n[i.PRERELEASELOOSE]})?${n[i.BUILD]}?)?)?`),o("XRANGE",`^${n[i.GTLT]}\\s*${n[i.XRANGEPLAIN]}$`),o("XRANGELOOSE",`^${n[i.GTLT]}\\s*${n[i.XRANGEPLAINLOOSE]}$`),o("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),o("COERCE",`${n[i.COERCEPLAIN]}(?:$|[^\\d])`),o("COERCEFULL",n[i.COERCEPLAIN]+`(?:${n[i.PRERELEASE]})?(?:${n[i.BUILD]})?(?:$|[^\\d])`),o("COERCERTL",n[i.COERCE],!0),o("COERCERTLFULL",n[i.COERCEFULL],!0),o("LONETILDE","(?:~>?)"),o("TILDETRIM",`(\\s*)${n[i.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",o("TILDE",`^${n[i.LONETILDE]}${n[i.XRANGEPLAIN]}$`),o("TILDELOOSE",`^${n[i.LONETILDE]}${n[i.XRANGEPLAINLOOSE]}$`),o("LONECARET","(?:\\^)"),o("CARETTRIM",`(\\s*)${n[i.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",o("CARET",`^${n[i.LONECARET]}${n[i.XRANGEPLAIN]}$`),o("CARETLOOSE",`^${n[i.LONECARET]}${n[i.XRANGEPLAINLOOSE]}$`),o("COMPARATORLOOSE",`^${n[i.GTLT]}\\s*(${n[i.LOOSEPLAIN]})$|^$`),o("COMPARATOR",`^${n[i.GTLT]}\\s*(${n[i.FULLPLAIN]})$|^$`),o("COMPARATORTRIM",`(\\s*)${n[i.GTLT]}\\s*(${n[i.LOOSEPLAIN]}|${n[i.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",o("HYPHENRANGE",`^\\s*(${n[i.XRANGEPLAIN]})\\s+-\\s+(${n[i.XRANGEPLAIN]})\\s*$`),o("HYPHENRANGELOOSE",`^\\s*(${n[i.XRANGEPLAINLOOSE]})\\s+-\\s+(${n[i.XRANGEPLAINLOOSE]})\\s*$`),o("STAR","(<|>)?=?\\s*\\*"),o("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),o("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(x,x.exports);var be=x.exports;const we=Object.freeze({loose:!0}),Te=Object.freeze({}),Ae=t=>t?typeof t!="object"?we:t:Te;var $e=Ae;const B=/^[0-9]+$/,Se=(t,e)=>{const r=B.test(t),s=B.test(e);return r&&s&&(t=+t,e=+e),t===e?0:r&&!s?-1:s&&!r?1:t<e?-1:1};var ye={compareIdentifiers:Se};const $=re,{MAX_LENGTH:V,MAX_SAFE_INTEGER:S}=ne,{safeRe:H,safeSrc:W,t:y}=be,Pe=$e,{compareIdentifiers:N}=ye;let _e=class u{constructor(e,r){if(r=Pe(r),e instanceof u){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>V)throw new TypeError(`version is longer than ${V} characters`);$("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const s=e.trim().match(r.loose?H[y.LOOSE]:H[y.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>S||this.major<0)throw new TypeError("Invalid major version");if(this.minor>S||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>S||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){const c=+a;if(c>=0&&c<S)return c}return a}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if($("SemVer.compare",this.version,this.options,e),!(e instanceof u)){if(typeof e=="string"&&e===this.version)return 0;e=new u(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof u||(e=new u(e,this.options)),N(this.major,e.major)||N(this.minor,e.minor)||N(this.patch,e.patch)}comparePre(e){if(e instanceof u||(e=new u(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{const s=this.prerelease[r],a=e.prerelease[r];if($("prerelease compare",r,s,a),s===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(s===void 0)return-1;if(s!==a)return N(s,a)}while(++r)}compareBuild(e){e instanceof u||(e=new u(e,this.options));let r=0;do{const s=this.build[r],a=e.build[r];if($("build compare",r,s,a),s===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(s===void 0)return-1;if(s!==a)return N(s,a)}while(++r)}inc(e,r,s){if(e.startsWith("pre")){if(!r&&s===!1)throw new Error("invalid increment argument: identifier is empty");if(r){const a=new RegExp(`^${this.options.loose?W[y.PRERELEASELOOSE]:W[y.PRERELEASE]}$`),c=`-${r}`.match(a);if(!c||c[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,s),this.inc("pre",r,s);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,s),this.inc("pre",r,s);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const a=Number(s)?1:0;if(this.prerelease.length===0)this.prerelease=[a];else{let c=this.prerelease.length;for(;--c>=0;)typeof this.prerelease[c]=="number"&&(this.prerelease[c]++,c=-2);if(c===-1){if(r===this.prerelease.join(".")&&s===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(r){let c=[r,a];s===!1&&(c=[r]),N(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=c):this.prerelease=c}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var ie=_e;const z=ie,De=(t,e,r=!1)=>{if(t instanceof z)return t;try{return new z(t,e)}catch(s){if(!r)return null;throw s}};var Ce=De;const Me=Ce,Fe=(t,e)=>{const r=Me(t,e);return r?r.version:null};var Ge=Fe;const Ue=q(Ge),je=ie,xe=(t,e)=>new je(t,e).major;var Xe=xe;const K=q(Xe);class ke{bus;constructor(e){typeof e.getVersion!="function"||!Ue(e.getVersion())?console.warn("Proxying an event bus with an unknown or invalid version"):K(e.getVersion())!==K(this.getVersion())&&console.warn("Proxying an event bus of version "+e.getVersion()+" with "+this.getVersion()),this.bus=e}getVersion(){return"3.3.2"}subscribe(e,r){this.bus.subscribe(e,r)}unsubscribe(e,r){this.bus.unsubscribe(e,r)}emit(e,...r){this.bus.emit(e,...r)}}class Be{handlers=new Map;getVersion(){return"3.3.2"}subscribe(e,r){this.handlers.set(e,(this.handlers.get(e)||[]).concat(r))}unsubscribe(e,r){this.handlers.set(e,(this.handlers.get(e)||[]).filter(s=>s!==r))}emit(e,...r){(this.handlers.get(e)||[]).forEach(s=>{try{s(r[0])}catch(a){console.error("could not invoke event listener",a)}})}}let w=null;function X(){return w!==null?w:typeof window>"u"?new Proxy({},{get:()=>()=>console.error("Window not available, EventBus can not be established!")}):(window.OC?._eventBus&&typeof window._nc_event_bus>"u"&&(console.warn("found old event bus instance at OC._eventBus. Update your version!"),window._nc_event_bus=window.OC._eventBus),typeof window?._nc_event_bus<"u"?w=new ke(window._nc_event_bus):w=window._nc_event_bus=new Be,w)}function Ve(t,e){X().subscribe(t,e)}function ft(t,e){X().unsubscribe(t,e)}function It(t,...e){X().emit(t,...e)}var _={},D={},A={};Object.defineProperty(A,"__esModule",{value:!0}),A.default=void 0;function C(t,e,r){return e=He(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function He(t){var e=We(t,"string");return typeof e=="symbol"?e:e+""}function We(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class g{constructor(e,r,s){C(this,"scope",void 0),C(this,"wrapped",void 0),this.scope="".concat(s?g.GLOBAL_SCOPE_PERSISTENT:g.GLOBAL_SCOPE_VOLATILE,"_").concat(btoa(e),"_"),this.wrapped=r}scopeKey(e){return"".concat(this.scope).concat(e)}setItem(e,r){this.wrapped.setItem(this.scopeKey(e),r)}getItem(e){return this.wrapped.getItem(this.scopeKey(e))}removeItem(e){this.wrapped.removeItem(this.scopeKey(e))}clear(){Object.keys(this.wrapped).filter(e=>e.startsWith(this.scope)).map(this.wrapped.removeItem.bind(this.wrapped))}}A.default=g,C(g,"GLOBAL_SCOPE_VOLATILE","nextcloud_vol"),C(g,"GLOBAL_SCOPE_PERSISTENT","nextcloud_per"),Object.defineProperty(D,"__esModule",{value:!0}),D.default=void 0;var ze=Ke(A);function Ke(t){return t&&t.__esModule?t:{default:t}}function G(t,e,r){return e=Ye(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ye(t){var e=Ze(t,"string");return typeof e=="symbol"?e:e+""}function Ze(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class qe{constructor(e){G(this,"appId",void 0),G(this,"persisted",!1),G(this,"clearedOnLogout",!1),this.appId=e}persist(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this.persisted=e,this}clearOnLogout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this.clearedOnLogout=e,this}build(){return new ze.default(this.appId,this.persisted?window.localStorage:window.sessionStorage,!this.clearedOnLogout)}}D.default=qe,Object.defineProperty(_,"__esModule",{value:!0}),_.clearAll=rt,_.clearNonPersistent=st;var Je=_.getBuilder=tt,Qe=oe(D),et=oe(A);function oe(t){return t&&t.__esModule?t:{default:t}}function tt(t){return new Qe.default(t)}function ae(t,e){Object.keys(t).filter(r=>e?e(r):!0).map(t.removeItem.bind(t))}function rt(){[window.sessionStorage,window.localStorage].map(t=>ae(t))}function st(){[window.sessionStorage,window.localStorage].map(t=>ae(t,e=>!e.startsWith(et.default.GLOBAL_SCOPE_PERSISTENT)))}let T;const ce=[];function Lt(){return T===void 0&&(T=document.head.dataset.requesttoken??null),T}function mt(t){ce.push(t)}Ve("csrf-token-update",t=>{T=t.token,ce.forEach(e=>{try{e(T)}catch(r){console.error("Error updating CSRF token observer",r)}})}),Je("public").persist().build();let R;const Y=(t,e)=>t?t.getAttribute(e):null;function nt(){if(R!==void 0)return R;const t=document?.getElementsByTagName("head")[0];if(!t)return null;const e=Y(t,"data-user");return e===null?(R=null,R):(R={uid:e,displayName:Y(t,"data-user-displayname"),isAdmin:!!window._oc_isadmin},R)}var E=(t=>(t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Fatal=4]="Fatal",t))(E||{}),it=Object.defineProperty,ot=(t,e,r)=>e in t?it(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,at=(t,e,r)=>(ot(t,e+"",r),r);class ct{constructor(e){at(this,"context"),this.context=e||{}}formatMessage(e,r,s){let a="["+E[r].toUpperCase()+"] ";return s&&s.app&&(a+=s.app+": "),typeof e=="string"?a+e:(a+="Unexpected ".concat(e.name),e.message&&(a+=' "'.concat(e.message,'"')),r===E.Debug&&e.stack&&(a+=`

Stack trace:
`.concat(e.stack)),a)}log(e,r,s){var a,c;if(!(typeof((a=this.context)==null?void 0:a.level)=="number"&&e<((c=this.context)==null?void 0:c.level)))switch(typeof r=="object"&&s?.error===void 0&&(s.error=r),e){case E.Debug:console.debug(this.formatMessage(r,E.Debug,s),s);break;case E.Info:console.info(this.formatMessage(r,E.Info,s),s);break;case E.Warn:console.warn(this.formatMessage(r,E.Warn,s),s);break;case E.Error:console.error(this.formatMessage(r,E.Error,s),s);break;case E.Fatal:default:console.error(this.formatMessage(r,E.Fatal,s),s);break}}debug(e,r){this.log(E.Debug,e,Object.assign({},this.context,r))}info(e,r){this.log(E.Info,e,Object.assign({},this.context,r))}warn(e,r){this.log(E.Warn,e,Object.assign({},this.context,r))}error(e,r){this.log(E.Error,e,Object.assign({},this.context,r))}fatal(e,r){this.log(E.Fatal,e,Object.assign({},this.context,r))}}function lt(t){return new ct(t)}var Et=Object.defineProperty,ut=(t,e,r)=>e in t?Et(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Z=(t,e,r)=>(ut(t,typeof e!="symbol"?e+"":e,r),r);class ht{constructor(e){Z(this,"context"),Z(this,"factory"),this.context={},this.factory=e}setApp(e){return this.context.app=e,this}setLogLevel(e){return this.context.level=e,this}setUid(e){return this.context.uid=e,this}detectUser(){const e=nt();return e!==null&&(this.context.uid=e.uid),this}detectLogLevel(){const e=this,r=()=>{var s,a;document.readyState==="complete"||document.readyState==="interactive"?(e.context.level=(a=(s=window._oc_config)==null?void 0:s.loglevel)!=null?a:E.Warn,window._oc_debug&&(e.context.level=E.Debug),document.removeEventListener("readystatechange",r)):document.addEventListener("readystatechange",r)};return r(),this}build(){return this.context.level===void 0&&this.detectLogLevel(),this.factory(this.context)}}function pt(){return new ht(lt)}const vt=pt().setApp("activity").detectUser().build();export{pt as a,nt as b,Lt as c,It as e,Je as g,vt as l,mt as o,ve as p,Ve as s,ft as u};
//# sourceMappingURL=logger-BtUR_6uh.chunk.mjs.map
